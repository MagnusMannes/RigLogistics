<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rig Logistics Deck Workspace</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
</head>
<body>
    <div id="app">
        <section id="deck-selection" class="view active">
            <div class="selection-card">
                <h1>Rig Logistics</h1>
                <p class="subtitle">Select a deck to continue</p>
                <div id="deck-list" class="deck-list"></div>
                <div class="selection-actions">
                    <div class="selection-settings">
                        <button
                            id="selection-settings-button"
                            class="ghost"
                            type="button"
                            aria-haspopup="true"
                            aria-expanded="false"
                            aria-controls="selection-settings-menu"
                        >
                            Settings
                        </button>
                        <div
                            id="selection-settings-menu"
                            class="menu selection-settings-menu"
                            role="menu"
                            aria-hidden="true"
                        >
                            <button id="create-deck" type="button" role="menuitem">Create new deck</button>
                            <button
                                id="delete-deck"
                                type="button"
                                role="menuitem"
                                class="danger"
                            >
                                Delete deck
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="workspace-view" class="view">
            <header class="workspace-header">
                <div id="deck-modify-notice" class="deck-modify-notice" hidden>
                    <div class="deck-modify-warning">Warning: modify deck mode</div>
                    <div class="deck-modify-escape">click Escape button to leave modify mode</div>
                </div>
                <div class="left-controls">
                    <div class="nav-controls">
                        <button id="back-button" class="ghost">
                            <span aria-hidden="true">←</span>
                            <span class="label">Decks</span>
                        </button>
                        <button id="toggle-sidebar" class="ghost">Toggle list</button>
                    </div>
                    <div class="toolbar">
                        <label>
                            W (m)
                            <input type="number" id="input-width" min="0.5" step="0.1" value="5" />
                        </label>
                        <label>
                            H (m)
                            <input type="number" id="input-height" min="0.5" step="0.1" value="3" />
                        </label>
                        <label>
                            Label
                            <input type="text" id="input-label" placeholder="Item label" />
                        </label>
                        <label class="color-picker">
                            Color
                            <input type="color" id="input-color" value="#3a7afe" />
                        </label>
                        <button id="create-item" class="primary">Create item</button>
                        <div class="tools-menu" id="tools-menu-container">
                            <button id="tools-button" class="ghost" type="button">Tools</button>
                            <div id="tools-menu" class="menu" role="menu">
                                <button id="toggle-measure-mode" role="menuitem" type="button">Enter measure mode</button>
                                <button id="toggle-planning-mode" role="menuitem" type="button">Enter planning mode</button>
                                <button
                                    id="deck-settings-button"
                                    role="menuitem"
                                    type="button"
                                    aria-expanded="false"
                                    aria-controls="deck-settings-panel"
                                >
                                    Deck settings
                                </button>
                                <div
                                    id="deck-settings-panel"
                                    class="deck-settings-panel"
                                    role="group"
                                    aria-hidden="true"
                                >
                                    <div class="deck-settings-section">
                                        <button id="deck-download-button" type="button">Download layout</button>
                                        <button id="deck-upload-button" type="button" disabled>Upload layout</button>
                                    </div>
                                    <div class="deck-settings-section">
                                        <button id="deck-modify-toggle" type="button">Enter modify mode</button>
                                    </div>
                                    <div class="deck-settings-section">
                                        <button id="deck-add-area-button" type="button">Add deck area</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="right-controls">
                    <div class="zoom-indicator">Zoom: <span id="zoom-value">100%</span></div>
                    <span id="planning-indicator" class="planning-indicator" hidden>Planning mode</span>
                </div>
            </header>

            <div class="workspace-body">
                <aside id="history-sidebar" class="sidebar">
                    <h2>Item overview</h2>
                    <div class="list-controls">
                        <label class="search-field" for="history-search">
                            <span class="visually-hidden">Search items</span>
                            <input type="search" id="history-search" placeholder="Search items" />
                        </label>
                        <div class="sort-buttons" role="group" aria-label="Sort items">
                            <button id="sort-alpha" class="ghost sort-button active" type="button">A → Z</button>
                            <button id="sort-date" class="ghost sort-button" type="button">Recent</button>
                        </div>
                    </div>
                    <ul id="history-list"></ul>
                </aside>

                <aside id="planning-sidebar" class="sidebar planning-sidebar hidden">
                    <h2>Planning</h2>
                    <div class="planning-section" aria-live="polite">
                        <button
                            id="planning-current-deck"
                            class="ghost planning-toggle"
                            type="button"
                            aria-pressed="true"
                        >
                            Current Deck
                        </button>
                        <div class="planning-actions">
                            <button id="create-planning-job" class="primary" type="button">
                                Add planning deck
                            </button>
                        </div>
                        <div id="planning-job-list" class="planning-job-list"></div>
                    </div>
                </aside>

                <div id="workspace-container" class="workspace-container">
                    <div id="workspace-content" class="workspace-content"></div>
                    <div
                        id="measurement-instructions"
                        class="measure-instructions"
                        aria-live="polite"
                        hidden
                    >
                        Press escape or measure button again to stop measure mode
                    </div>
                </div>
            </div>
        </section>
    </div>

    <div id="context-menu" class="menu context-menu" role="menu">
        <button data-action="modify-item" role="menuitem">Modify…</button>
        <button data-action="attach-file" role="menuitem">Attach file…</button>
        <button data-action="resize" role="menuitem">Resize…</button>
        <button data-action="lock-item" role="menuitem">Lock item</button>
        <button data-action="comment" role="menuitem">Add comment</button>
        <button data-action="delete" role="menuitem" class="danger">Delete</button>
    </div>

    <script src="/config.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="main.js"></script>
</body>
</html>
